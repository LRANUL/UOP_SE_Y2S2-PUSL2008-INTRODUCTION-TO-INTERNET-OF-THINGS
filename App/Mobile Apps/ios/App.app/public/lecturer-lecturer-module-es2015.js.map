{"version":3,"sources":["./src/app/lecturer/lecturer.page.html","./src/app/lecturer/lecturer-routing.module.ts","./src/app/lecturer/lecturer.module.ts","./src/app/lecturer/lecturer.page.scss","./src/app/lecturer/lecturer.page.ts"],"names":[],"mappings":"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","file":"lecturer-lecturer-module-es2015.js","sourcesContent":["export default \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-title>Hello, {{Name}} \\r\\n    </ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n<ion-content>\\r\\n  <div class=\\\"col text-right\\\">\\r\\n    <ion-button color=\\\"primary\\\" (click)=\\\"logout()\\\" align=\\\"right\\\" size=\\\"small\\\">\\r\\n      <ion-icon name=\\\"log-out-outline\\\"></ion-icon>Logout\\r\\n    </ion-button>\\r\\n  </div>\\r\\n  <ion-item>\\r\\n    <ion-card>\\r\\n      <ion-card-title>Schedule</ion-card-title>\\r\\n      <calendar [eventSource]=\\\"eventSource\\\" [calendarMode]=\\\"calendar.mode\\\" [currentDate]=\\\"calendar.currentDate\\\">\\r\\n      </calendar>\\r\\n    </ion-card>\\r\\n  </ion-item>\\r\\n  <ion-item>\\r\\n    <h4>Selected Module: {{Module}}</h4>\\r\\n</ion-item>\\r\\n<ion-item>\\r\\n  Allow Location<ion-toggle checked={{check}} (ionChange)=\\\"checkevt($event)\\\"></ion-toggle>\\r\\n  </ion-item>\\r\\n  <ion-item>\\r\\n    <ion-button color=\\\"warning\\\" (click)=\\\"generateKey()\\\">Generate and Add Key</ion-button>\\r\\n    <ion-label aria-placeholder=\\\"Press the Button to Generate and Add a Key\\\">:- {{Key}} </ion-label>\\r\\n  </ion-item>\\r\\n</ion-content>\"","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { LecturerPage } from './lecturer.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: LecturerPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class LecturerPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { LecturerPageRoutingModule } from './lecturer-routing.module';\r\n\r\nimport { LecturerPage } from './lecturer.page';\r\nimport { NgCalendarModule } from 'ionic2-calendar';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    LecturerPageRoutingModule,\r\n    NgCalendarModule\r\n  ],\r\n  declarations: [LecturerPage]\r\n})\r\nexport class LecturerPageModule {}\r\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2xlY3R1cmVyL2xlY3R1cmVyLnBhZ2Uuc2NzcyJ9 */\"","import { Component, OnInit } from '@angular/core';\r\nimport { AngularFirestore } from '@angular/fire/firestore/';\r\nimport { FirebaseService } from '../services/firebase.service';\r\nimport { LoadingController, NavController, ToastController } from '@ionic/angular';\r\n\r\n@Component({\r\n  selector: 'app-lecturer',\r\n  templateUrl: './lecturer.page.html',\r\n  styleUrls: ['./lecturer.page.scss'],\r\n})\r\nexport class LecturerPage implements OnInit {\r\n  Faculty: any;\r\n  Name: any;\r\n  title;\r\n  Key: any;\r\n  notices: any;\r\n  eventSource = [];\r\n  calendar = {\r\n    mode: 'month',\r\n    currentDate: new Date(),\r\n  };\r\n  selectedDate = new Date();\r\n  Module: string;\r\n  check: boolean;\r\n  value: any;\r\n  constructor(private toastController: ToastController, private firestore: AngularFirestore, private firebase: FirebaseService, public loadingController: LoadingController, public navCtrl: NavController) { }\r\n  ngOnInit() {\r\n    this.firestore.collection('/users/userTypes/lecturerUsers').doc(this.firebase.userDetails().uid).set({\r\n      Activity: 'Online',\r\n    }, { merge: true });\r\n    this.firestore.collection('userActivityMonitoring').add({\r\n      loginDateTime: new Date(),\r\n      userId: this.firebase.userDetails().uid,\r\n    })\r\n    var name;\r\n    var faculty;\r\n\r\n    this.firestore.collection('/users/userTypes/lecturerUsers').doc(this.firebase.userDetails().uid).ref.get().then((doc) => {\r\n      if (doc.exists) {\r\n        // console.log(doc.data());\r\n        this.Name = doc.data().name.prefix + \" \" + doc.data().name.firstName + \" \" + doc.data().name.lastName;\r\n        faculty = doc.data().createdDetails.createdFaculty;\r\n        // console.log(faculty)\r\n        this.firestore.collection('faculties').doc(faculty).collection('allLectureSessions').snapshotChanges().subscribe(keys => {\r\n          this.eventSource = [];\r\n          keys.forEach(key => {\r\n            let event: any = key.payload.doc.data();\r\n            event.id = key.payload.doc.id;\r\n            event.title = event.moduleTitle + \" | At Hall: \" + event.lectureHall;\r\n            event.startTime = event.startDateTime.toDate();\r\n            event.endTime = event.endDateTime.toDate();\r\n            this.Module = event.moduleTitle\r\n            this.eventSource.push(event);\r\n          });\r\n        });\r\n      }\r\n    })\r\n  }\r\n  checkevt($event) {\r\n    this.check = !this.value;\r\n  }\r\n  generateKey() {\r\n    if(this.check=true){\r\n      var LocationCheck = true;\r\n    }\r\n    else{\r\n      var LocationCheck = false;\r\n    }\r\n    var seconds = new Date().getTime();\r\n    var uniquekey = 'xyxyxy'.replace(/[xy]/g, function (c) {\r\n      var randomkey = (seconds + Math.random() * 25) % 25 | 0;\r\n      seconds = Math.floor(seconds / 25);\r\n      return (c == 'x' ? randomkey : (randomkey & 0x3 | 0x8)).toString(25);\r\n    });\r\n    this.Key = uniquekey.toUpperCase()\r\n    var name;\r\n    var faculty;\r\n    var PrepKey = this.Key = uniquekey.toUpperCase()\r\n    this.firestore.collection('/users/userTypes/lecturerUsers').doc(this.firebase.userDetails().uid).ref.get().then((doc) => {\r\n      if (doc.exists) {\r\n        // console.log(doc.data());\r\n        this.Name = doc.data().name.prefix + \" \" + doc.data().name.firstName + \" \" + doc.data().name.lastName;\r\n        faculty = doc.data().createdDetails.createdFaculty;\r\n        // console.log(faculty)\r\n        this.firestore.collection('faculties').doc(faculty).collection('allLectureSessions').snapshotChanges().subscribe(keys => {\r\n          this.eventSource = [];\r\n          keys.forEach(key => {\r\n            let event: any = key.payload.doc.data();\r\n            event.id = key.payload.doc.id;\r\n            event.title = event.moduleTitle + \" | At Hall: \" + event.lectureHall;\r\n            event.startTime = event.startDateTime.toDate();\r\n            event.endTime = event.endDateTime.toDate();\r\n            this.Module = event.moduleTitle\r\n            if (name = event.lecturer) {\r\n              var selectedDoc = key.payload.doc.id\r\n              // console.log(PrepKey + \" \" + selectedDoc)\r\n              this.firebase.sendKey(faculty, PrepKey, selectedDoc, LocationCheck).then(async resp => {\r\n                const toast = await this.toastController.create({\r\n                  message: 'Code Added to Module',\r\n                  duration: 2000\r\n                });\r\n                toast.present();\r\n              })\r\n                .catch(async error => {\r\n                  // console.log(error);\r\n                  const toast = await this.toastController.create({\r\n                    message: 'Error in Network, check back later. Or contact Programs Office',\r\n                    duration: 2000\r\n                  });\r\n                  toast.present();\r\n                });\r\n            }\r\n          });\r\n        });\r\n\r\n      }\r\n    })\r\n  }\r\n\r\n  async logout() {\r\n    this.firestore.collection('/users/userTypes/lecturerUsers').doc(this.firebase.userDetails().uid).set({\r\n      Activity: 'Offline',\r\n    }, { merge: true });\r\n    this.firebase\r\n      .logoutUser()\r\n      .then(async res => {\r\n        // console.log(res);\r\n        const loading = await this.loadingController.create({\r\n          message: 'Logging out...',\r\n          duration: 2000\r\n        });\r\n        await loading.present();\r\n\r\n        const { role, data } = await loading.onDidDismiss();\r\n        // console.log('Loading dismissed!');\r\n\r\n        this.navCtrl.navigateBack(\"\");\r\n      })\r\n      .catch(error => {\r\n        // console.log(error);\r\n      });\r\n  }\r\n\r\n}\r\n"],"sourceRoot":"webpack:///"}